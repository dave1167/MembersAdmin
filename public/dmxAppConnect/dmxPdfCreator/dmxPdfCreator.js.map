{"version":3,"sources":["components/pdfCreator.js","components/pdfInfo.js","components/pdfStyle.js","components/pdfContent.js","components/pdfHeader.js","components/pdfFooter.js","components/pdfWatermark.js","components/pdfText.js","components/pdfImage.js"],"names":["dmx","Component","attributes","content","type","String","default","ui","valuePrefix","valuesSelector","valuesSelectorAttribute","values","title","value","compress","Boolean","userPassword","ownerPassword","pageSize","enum","pageOrientation","pageMargins","Number","Array","groupTitle","arrayVariables","isDynamic","variables","name","dataBindings","arrayIndex","defaultValue","tagName","children","allowed_children","allowedGlobalChildren","linkFiles","src","methods","download","filename","this","_createPdf","open","print","preview","target","iframe","document","getElementById","getDataUrl","dataUrl","init","styles","getComputedStyle","body","getPropertyValue","_primary","_secondary","_success","_danger","_warning","_info","_light","_dark","_styles","_bootstrapStyles","_pageSizes","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","RA0","RA1","RA2","RA3","RA4","SRA0","SRA1","SRA2","SRA3","SRA4","EXECUTIVE","FOLIO","LEGAL","LETTER","TABLOID","_pageSize","l","props","size","width","height","margin","docDefinition","images","child","data","$type","info","ret","_createContent","Object","assign","_createHeader","header","_createFooter","footer","watermark","querySelector","dmxComponent","pageBreakBefore","currentNode","followingNodesOnPage","nodesOnNextPage","previousNodesOnPage","isArray","style","includes","length","debug","console","pdfMake","createPdf","bootstrap","_bootstrapLayout","hLineWidth","i","node","log","s","table","dividers","vLineWidth","hLineColor","vLineColor","paddingLeft","paddingRight","paddingTop","paddingBottom","fillColor","color","background","fillOpacity","fontSize","h1","h2","h3","h4","h5","h6","alignment","bold","italics","decoration","author","subject","keywords","creator","producer","font","fontFeatures","lineHeight","markerColor","decorationStyle","decorationColor","removeExtraBlanks","showHidden","removeTagClasses","tableAutoSize","_getAbsoluteUrl","url","a","createElement","href","_prepareContent","contentWidth","template","innerHTML","$node","querySelectorAll","forEach","el","removeAttribute","setAttribute","remove","headerRows","firstRow","cols","pad","classList","contains","widths","from","map","push","totalRows","footerRows","dataset","pdfmake","JSON","stringify","layout","html","htmlToPdfmake","imagesByReference","defaultStyles","th","customTag","params","element","columnGap","columns","stack","text","test","tocItem","render","display","$parse","ref","Math","random","toString","slice","fit","image","currentPage","pageCount","structuredClone","col","replace","opacity","angle"],"mappings":"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","file":"dmxPdfCreator.js","sourcesContent":["dmx.Component('pdf-creator', {\r\n\r\n  attributes: {\r\n\r\n    // querySelector to the content element when not as child\r\n    content: {\r\n      type: String,\r\n      default: null,\r\n      ui: {\r\n        valuePrefix: '#',\r\n        valuesSelector: '[is=\"dmx-pdf-content\"]',\r\n        valuesSelectorAttribute: 'id',\r\n        values: [\r\n          { title: 'None', value: ''}\r\n        ]\r\n      }\r\n    },\r\n\r\n    compress: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n\r\n    userPassword: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    ownerPassword: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    pageSize: {\r\n      type: String,\r\n      default: 'A4',\r\n      enum: ['4A0', '2A0', 'A0', 'A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'A7', 'A8', 'A9', 'A10', 'B0', 'B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8', 'B9', 'B10', 'C0', 'C1', 'C2', 'C3', 'C4', 'C5', 'C6', 'C7', 'C8', 'C9', 'C10', 'RA0', 'RA1', 'RA2', 'RA3', 'RA4', 'SRA0', 'SRA1', 'SRA2', 'SRA3', 'SRA4', 'LETTER', 'LEGAL', 'TABLOID', 'EXECUTIVE', 'FOLIO'],\r\n    },\r\n\r\n    pageOrientation: {\r\n      type: String,\r\n      default: 'portrait',\r\n      enum: ['portrait', 'landscape'],\r\n    },\r\n\r\n    pageMargins: {\r\n      type: [Number, Array],\r\n      default: [40, 40, 40, 40],\r\n      ui: {\r\n        groupTitle: 'Page Margin',\r\n        arrayVariables: true,\r\n        isDynamic: true,\r\n        variables: [\r\n          {name: 'marginLeft', type: 'text', title: 'Left', dataBindings: true, arrayIndex:0, defaultValue: 40},\r\n          {name: 'marginTop', type: 'text', title: 'Top', dataBindings: true, arrayIndex:1, defaultValue: 40},\r\n          {name: 'marginRight', type: 'text', title: 'Right', dataBindings: true, arrayIndex:2, defaultValue: 40},\r\n          {name: 'marginBottom', type: 'text', title: 'Bottom', dataBindings: true, arrayIndex:3, defaultValue: 40},\r\n        ]\r\n      },\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-creator',\r\n    children: ['dmx-pdf-info', 'dmx-pdf-style', 'pdf-content', 'dmx-pdf-header', 'dmx-pdf-footer', 'dmx-pdf-watermark'],\r\n    allowed_children: {'dmx-pdf-info':1, 'dmx-pdf-style':-1, 'pdf-content':1, 'dmx-pdf-header':1, 'dmx-pdf-footer':1, 'dmx-pdf-watermark':1},\r\n    allowedGlobalChildren: {},\r\n    linkFiles: [\r\n      {src: 'https://cdn.jsdelivr.net/npm/pdfmake@0.2.9/build/pdfmake.min.js', type: 'js'},\r\n      {src: 'https://cdn.jsdelivr.net/npm/pdfmake@0.2.9/build/vfs_fonts.min.js', type: 'js'},\r\n      {src: 'https://cdn.jsdelivr.net/npm/html-to-pdfmake/browser.js', type: 'js'}\r\n    ]\r\n  },\r\n\r\n  methods: {\r\n    download (filename) {\r\n      this._createPdf().download(filename);\r\n    },\r\n\r\n    open () {\r\n      this._createPdf().open();\r\n    },\r\n\r\n    print () {\r\n      this._createPdf().print();\r\n    },\r\n\r\n    preview (target) {\r\n      const iframe = document.getElementById(target);\r\n      if (iframe) {\r\n        this._createPdf().getDataUrl((dataUrl) => {\r\n          iframe.src = dataUrl;\r\n        });\r\n      }\r\n    },\r\n  },\r\n\r\n  init () {\r\n    const styles = getComputedStyle(document.body);\r\n\r\n    if (styles.getPropertyValue('--bs-primary')) {\r\n      this._primary = styles.getPropertyValue('--bs-primary');\r\n      this._secondary = styles.getPropertyValue('--bs-secondary');\r\n      this._success = styles.getPropertyValue('--bs-success');\r\n      this._danger = styles.getPropertyValue('--bs-danger');\r\n      this._warning = styles.getPropertyValue('--bs-warning');\r\n      this._info = styles.getPropertyValue('--bs-info');\r\n      this._light = styles.getPropertyValue('--bs-light');\r\n      this._dark = styles.getPropertyValue('--bs-dark');\r\n      this._styles = this._bootstrapStyles();\r\n    } else {\r\n      this._styles = {};\r\n    }\r\n\r\n    this._pageSizes = {\r\n      '4A0': [4767.87, 6740.79],\r\n      '2A0': [3370.39, 4767.87],\r\n      A0: [2383.94, 3370.39],\r\n      A1: [1683.78, 2383.94],\r\n      A2: [1190.55, 1683.78],\r\n      A3: [841.89, 1190.55],\r\n      A4: [595.28, 841.89],\r\n      A5: [419.53, 595.28],\r\n      A6: [297.64, 419.53],\r\n      A7: [209.76, 297.64],\r\n      A8: [147.40, 209.76],\r\n      A9: [104.88, 147.40],\r\n      A10: [73.70, 104.88],\r\n      B0: [2834.65, 4008.19],\r\n      B1: [2004.09, 2834.65],\r\n      B2: [1417.32, 2004.09],\r\n      B3: [1000.63, 1417.32],\r\n      B4: [708.66, 1000.63],\r\n      B5: [498.90, 708.66],\r\n      B6: [354.33, 498.90],\r\n      B7: [249.45, 354.33],\r\n      B8: [175.75, 249.45],\r\n      B9: [124.72, 175.75],\r\n      B10: [87.87, 124.72],\r\n      C0: [2599.37, 3676.54],\r\n      C1: [1836.85, 2599.37],\r\n      C2: [1298.27, 1836.85],\r\n      C3: [918.43, 1298.27],\r\n      C4: [649.13, 918.43],\r\n      C5: [459.21, 649.13],\r\n      C6: [323.15, 459.21],\r\n      C7: [229.61, 323.15],\r\n      C8: [161.57, 229.61],\r\n      C9: [113.39, 161.57],\r\n      C10: [79.37, 113.39],\r\n      RA0: [2437.80, 3458.27],\r\n      RA1: [1729.13, 2437.80],\r\n      RA2: [1218.90, 1729.13],\r\n      RA3: [864.57, 1218.90],\r\n      RA4: [609.45, 864.57],\r\n      SRA0: [2551.18, 3628.35],\r\n      SRA1: [1814.17, 2551.18],\r\n      SRA2: [1275.59, 1814.17],\r\n      SRA3: [907.09, 1275.59],\r\n      SRA4: [637.80, 907.09],\r\n      EXECUTIVE: [521.86, 756.00],\r\n      FOLIO: [612.00, 936.00],\r\n      LEGAL: [612.00, 1008.00],\r\n      LETTER: [612.00, 792.00],\r\n      TABLOID: [792.00, 1224.00],\r\n    };\r\n  },\r\n\r\n  _pageSize () {\r\n    const l = this.props.pageOrientation == 'landscape';\r\n    const size = this._pageSizes[this.props.pageSize];\r\n    return {\r\n      width: size[l ? 1 : 0],\r\n      height: size[l ? 0 : 1],\r\n      margin: this.props.pageMargins,\r\n    };\r\n  },\r\n\r\n  _createPdf () {\r\n    const docDefinition = {\r\n      styles: this._styles,\r\n      images: {},\r\n      ...this.props,\r\n    };\r\n\r\n    for (const child of this.children) {\r\n      switch (child.data.$type) {\r\n        case 'pdf-info':\r\n          docDefinition.info = child.props;\r\n          break;\r\n        case 'pdf-style':\r\n          docDefinition.styles[child.props.name] = child.props;\r\n          break;\r\n        case 'pdf-content':\r\n          {\r\n            const ret = child._createContent(this._pageSize());\r\n            docDefinition.content = ret.content;\r\n            Object.assign(docDefinition.images, ret.images);\r\n          }\r\n          break;\r\n        case 'pdf-header':\r\n          {\r\n            const ret = child._createHeader();\r\n            docDefinition.header = ret.header;\r\n            Object.assign(docDefinition.images, ret.images);\r\n          }\r\n          break;\r\n        case 'pdf-footer':\r\n          {\r\n            const ret = child._createFooter();\r\n            docDefinition.footer = ret.footer;\r\n            Object.assign(docDefinition.images, ret.images);\r\n          }\r\n          break;\r\n        case 'pdf-watermark':\r\n          docDefinition.watermark = child.props;\r\n          break;\r\n      }\r\n    }\r\n\r\n    if (this.props.content) {\r\n      const content = document.querySelector(this.props.content);\r\n      if (content && content.dmxComponent) {\r\n        const ret = content.dmxComponent._createContent(this._pageSize());\r\n        docDefinition.content = ret.content;\r\n        Object.assign(docDefinition.images, ret.images);\r\n      }\r\n    }\r\n\r\n    docDefinition.pageBreakBefore = (currentNode, followingNodesOnPage, nodesOnNextPage, previousNodesOnPage) => {\r\n      return Array.isArray(currentNode.style) && currentNode.style.includes('pdf-pagebreak-before') && previousNodesOnPage.length;\r\n    };\r\n\r\n    if (dmx.debug) {\r\n      console.debug('docDefinition', docDefinition);\r\n    }\r\n\r\n    /*\r\n    if (Array.isArray(docDefinition.content)) {\r\n      docDefinition.content.unshift({\r\n        toc: {\r\n          title: { text: 'Table of Contents', style: 'html-h1' },\r\n          pageBreak: 'after',\r\n        },\r\n      });\r\n    }\r\n    */\r\n\r\n    return pdfMake.createPdf(docDefinition, {\r\n      bootstrap: this._bootstrapLayout(),\r\n    });\r\n  },\r\n\r\n  _bootstrapLayout () {\r\n    if (!this._primary) return {};\r\n    return {\r\n      hLineWidth: (i, node) => {\r\n        console.log(i, node);\r\n        const s = Array.isArray(node.table.dividers) && node.table.dividers.includes(i) ? 1 : .5;\r\n        if (node.style.includes('table-borderless')) return 0;\r\n        if (node.style.includes('table-bordered')) return s;\r\n        return i == 0 ? 0 : s;\r\n      },\r\n      vLineWidth: (i, node) => node.style.includes('table-bordered') ? .5 : 0,\r\n      hLineColor: (i, node) => Array.isArray(node.table.dividers) && node.table.dividers.includes(i) ? 'black' : '#b6bfc8',\r\n      vLineColor: (i, node) => '#b6bfc8',\r\n      paddingLeft: (i, node) => node.style.includes('table-sm') ? 3 : 6,\r\n      paddingRight: (i, node) => node.style.includes('table-sm') ? 3 : 6,\r\n      paddingTop: (i, node) => node.style.includes('table-sm') ? 3 : 6,\r\n      paddingBottom: (i, node) => node.style.includes('table-sm') ? 3 : 6,\r\n      fillColor: (i, node) => (node.style.includes('table-striped') && i % 2 == 1) ? '#f2f2f2' : null,\r\n    }\r\n  },\r\n\r\n  _bootstrapStyles () {\r\n    return {\r\n      'text-primary': { color: this._primary },\r\n      'text-secondary': { color: this._secondary },\r\n      'text-success': { color: this._success },\r\n      'text-danger': { color: this._danger },\r\n      'text-warning': { color: this._warning },\r\n      'text-info': { color: this._info },\r\n      'text-light': { color: this._light },\r\n      'text-dark': { color: this._dark },\r\n      'link-primary': { color: this._primary },\r\n      'link-secondary': { color: this._secondary },\r\n      'link-success': { color: this._success },\r\n      'link-danger': { color: this._danger },\r\n      'link-warning': { color: this._warning },\r\n      'link-info': { color: this._info },\r\n      'link-light': { color: this._light },\r\n      'link-dark': { color: this._dark },\r\n      'bg-primary': { background: this._primary },\r\n      'bg-secondary': { background: this._secondary },\r\n      'bg-success': { background: this._success },\r\n      'bg-danger': { background: this._danger },\r\n      'bg-warning': { background: this._warning },\r\n      'bg-info': { background: this._info },\r\n      'bg-light': { background: this._light },\r\n      'bg-dark': { background: this._dark },\r\n      'table-primary': { fillColor: this._primary, fillOpacity: 0.25 },\r\n      'table-secondary': { fillColor: this._secondary, fillOpacity: 0.25 },\r\n      'table-success': { fillColor: this._success, fillOpacity: 0.25 },\r\n      'table-danger': { fillColor: this._danger, fillOpacity: 0.25 },\r\n      'table-warning': { fillColor: this._warning, fillOpacity: 0.25 },\r\n      'table-info': { fillColor: this._info, fillOpacity: 0.25 },\r\n      'table-light': { fillColor: this._light, fillOpacity: 0.25 },\r\n      'table-dark': { fillColor: this._dark, fillOpacity: 0.25 },\r\n      'fs-1': { fontSize: 24 },\r\n      'fs-2': { fontSize: 22 },\r\n      'fs-3': { fontSize: 20 },\r\n      'fs-4': { fontSize: 18 },\r\n      'fs-5': { fontSize: 16 },\r\n      'fs-6': { fontSize: 14 },\r\n      'h1': { fontSize: 24 },\r\n      'h2': { fontSize: 22 },\r\n      'h3': { fontSize: 20 },\r\n      'h4': { fontSize: 18 },\r\n      'h5': { fontSize: 16 },\r\n      'h6': { fontSize: 14 },\r\n      'text-start': { alignment: 'left' },\r\n      'text-center': { alignment: 'center' },\r\n      'text-end': { alignment: 'right' },\r\n      'fw-bold': { bold: true },\r\n      'fw-bolder': { bold: true },\r\n      'fw-normal': { bold: false },\r\n      'fst-italic': { italics: true },\r\n      'fst-normal': { italics: false },\r\n      'text-decoration-underline': { decoration: 'underline' },\r\n      'text-decoration-line-through': { decoration: 'lineThrough' },\r\n    };\r\n  },\r\n\r\n});","dmx.Component('pdf-info', {\r\n\r\n  attributes: {\r\n    title: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    author: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    subject: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    keywords: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    creator: {\r\n      type: String,\r\n      default: 'Wappler PDF Creator',\r\n    },\r\n\r\n    producer: {\r\n      type: String,\r\n      default: 'Wappler PDF Creator',\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-info',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});","dmx.Component('pdf-style', {\r\n\r\n  attributes: {\r\n    name: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    font: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    fontSize: {\r\n      type: Number,\r\n      default: null,\r\n    },\r\n\r\n    fontFeatures: {\r\n      type: Array,\r\n      default: null,\r\n    },\r\n\r\n    lineHeight: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n\r\n    bold: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    italics: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    alignment: {\r\n      type: String,\r\n      default: null,\r\n      enum: ['left', 'center', 'right', 'justify'],\r\n    },\r\n\r\n    color: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    background: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    markerColor: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    decoration: {\r\n      type: String,\r\n      default: null,\r\n      enum: ['underline', 'lineThrough', 'overline'],\r\n    },\r\n\r\n    decorationStyle: {\r\n      type: String,\r\n      default: null,\r\n      enum: ['dotted', 'dashed', 'double', 'wavy'],\r\n    },\r\n\r\n    decorationColor: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-style',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});","dmx.Component('pdf-content', {\r\n\r\n  attributes: {\r\n    removeExtraBlanks: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    showHidden: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    removeTagClasses: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    tableAutoSize: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n\r\n  _getAbsoluteUrl (url) {\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    return a.href;\r\n  },\r\n\r\n  _prepareContent (pageSize) {\r\n    //console.log('pageSize', pageSize);\r\n    const contentWidth = pageSize.width - pageSize.margin[0] - pageSize.margin[2];\r\n    const template = document.createElement('template');\r\n    template.innerHTML = this.$node.innerHTML;\r\n\r\n    template.content.querySelectorAll('[id]').forEach((el) => {\r\n      el.removeAttribute('id');\r\n    });\r\n\r\n    template.content.querySelectorAll('[src]').forEach((el) => {\r\n      el.setAttribute('src', this._getAbsoluteUrl(el.src));\r\n    });\r\n\r\n    template.content.querySelectorAll('[href]').forEach((el) => {\r\n      el.setAttribute('href', this._getAbsoluteUrl(el.href));\r\n    });\r\n\r\n    template.content.querySelectorAll('.d-print-none').forEach((el) => {\r\n      el.remove();\r\n    });\r\n\r\n    template.content.querySelectorAll('.table').forEach((el) => {\r\n      const headerRows = el.querySelectorAll('thead tr');\r\n      const firstRow = el.querySelector('tr').children;\r\n      const cols = firstRow.length;\r\n      const pad = el.classList.contains('table-sm') ? 6 : 12;\r\n      const dividers = [];\r\n      \r\n      let widths = Array.from({length:cols});\r\n      if (el.querySelectorAll('th.w-100, td.w-100').length) { \r\n        for (let i = 0; i < cols; i++) {\r\n          if (firstRow[i].classList.contains('w-100')) {\r\n            widths[i] = '*';\r\n          } else {\r\n            widths[i] = 'auto';\r\n          }\r\n        }\r\n      } else {\r\n        widths = Array.from({length:cols}).map(() => (contentWidth / cols) - pad);\r\n      }\r\n\r\n      if (el.querySelector('tbody.table-group-divider')) {\r\n        dividers.push(headerRows.length);\r\n      }\r\n\r\n      if (el.querySelector('tfoot.table-group-divider')) {\r\n        const totalRows = el.querySelectorAll('tr').length;\r\n        const footerRows = el.querySelectorAll('tfoot tr').length;\r\n        dividers.push(totalRows - footerRows);\r\n      }\r\n      \r\n      el.dataset.pdfmake = JSON.stringify({\r\n        layout: 'bootstrap',\r\n        widths: widths,\r\n        dividers: dividers,\r\n        headerRows: headerRows.length\r\n      });\r\n    });\r\n\r\n    template.content.querySelectorAll('hr').forEach((el) => {\r\n      el.dataset.pdfmake = JSON.stringify({ width: contentWidth });\r\n    });\r\n\r\n    return template.innerHTML;\r\n  },\r\n\r\n  _createContent (pageSize) {\r\n    let html = this._prepareContent(pageSize);\r\n\r\n    return htmlToPdfmake(html, {\r\n      ...this.props,\r\n      imagesByReference: true,\r\n      defaultStyles: {\r\n        th: { bold: true, fillColor: '' },\r\n      },\r\n      customTag: (params) => {\r\n        // support for columns\r\n        if (params.element.classList.contains('row')) {\r\n          params.ret.columnGap = 10;\r\n          params.ret.columns = params.ret.stack || params.ret.text;\r\n          delete params.ret.stack;\r\n          delete params.ret.text;\r\n        }\r\n\r\n        if (/^H\\d$/.test(params.element.tagName)) {\r\n          params.ret.tocItem = true;\r\n        }\r\n\r\n        return params.ret;\r\n      },\r\n    });\r\n  },\r\n\r\n});","dmx.Component('pdf-header', {\r\n\r\n  attributes: {\r\n    columnGap: {\r\n      type: Number,\r\n      default: 10,\r\n    },\r\n\r\n    margin: {\r\n      type: [Number, Array],\r\n      default: 10,\r\n      ui: {\r\n        groupTitle: 'Margin',\r\n        arrayVariables: true,\r\n        isDynamic: true,\r\n        variables: [\r\n          {name: 'marginLeft', type: 'text', title: 'Left', dataBindings: true, arrayIndex:0, defaultValue: 10},\r\n          {name: 'marginTop', type: 'text', title: 'Top', dataBindings: true, arrayIndex:1, defaultValue: 10},\r\n          {name: 'marginRight', type: 'text', title: 'Right', dataBindings: true, arrayIndex:2, defaultValue: 10},\r\n          {name: 'marginBottom', type: 'text', title: 'Bottom', dataBindings: true, arrayIndex:3, defaultValue: 10},\r\n        ]\r\n      },\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-header',\r\n    children: ['dmx-pdf-text', 'dmx-pdf-image'],\r\n    allowed_children: {'dmx-pdf-text':-1, 'dmx-pdf-image':-1},\r\n    allowedGlobalChildren: {}\r\n  },\r\n\r\n  render (node) {\r\n    node.style.display = 'none';\r\n    this.$parse();\r\n  },\r\n\r\n  _getAbsoluteUrl (url) {\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    return a.href;\r\n  },\r\n\r\n  _createHeader () {\r\n    const ret = {\r\n      header: {\r\n        columns: [],\r\n        ...this.props,\r\n      },\r\n      images: {},\r\n    };\r\n\r\n    for (const child of this.children) {\r\n      if (child.data.$type === 'pdf-image') {\r\n        const ref = 'img_ref_' + Math.random().toString(36).slice(2,8);\r\n        const url = this._getAbsoluteUrl(child.props.src);\r\n        const props = {};\r\n        \r\n        if (child.props.fit) {\r\n          props.fit = [child.props.width || 1000, child.props.height || 1000];\r\n          if (child.props.width) props.width = child.props.width;\r\n        } else {\r\n          if (child.props.width) props.width = child.props.width;\r\n          if (child.props.height) props.height = child.props.height;\r\n        }\r\n\r\n        ret.images[ref] = url;\r\n        ret.header.columns.push({\r\n          image: ref,\r\n          ...props\r\n        });\r\n\r\n        continue;\r\n      }\r\n\r\n      ret.header.columns.push({ ...child.props });\r\n    }\r\n\r\n    return {\r\n      header: (currentPage, pageCount) => {\r\n        const header = structuredClone(ret.header);\r\n\r\n        for (const col of header.columns) {\r\n          if (col.text) col.text = col.text.replace(/##page##/g, currentPage).replace(/##total##/g, pageCount);\r\n        }\r\n        \r\n        //console.info('pdf-header', header);\r\n\r\n        return header;\r\n      },\r\n      images: ret.images,\r\n    };\r\n  },\r\n\r\n});","dmx.Component('pdf-footer', {\r\n\r\n  attributes: {\r\n    columnGap: {\r\n      type: Number,\r\n      default: 10,\r\n    },\r\n\r\n    margin: {\r\n      type: [Number, Array],\r\n      default: 10,\r\n      ui: {\r\n        groupTitle: 'Margin',\r\n        arrayVariables: true,\r\n        isDynamic: true,\r\n        variables: [\r\n          {name: 'marginLeft', type: 'text', title: 'Left', dataBindings: true, arrayIndex:0, defaultValue: 10},\r\n          {name: 'marginTop', type: 'text', title: 'Top', dataBindings: true, arrayIndex:1, defaultValue: 10},\r\n          {name: 'marginRight', type: 'text', title: 'Right', dataBindings: true, arrayIndex:2, defaultValue: 10},\r\n          {name: 'marginBottom', type: 'text', title: 'Bottom', dataBindings: true, arrayIndex:3, defaultValue: 10},\r\n        ]\r\n      },\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-footer',\r\n    children: ['dmx-pdf-text', 'dmx-pdf-image'],\r\n    allowed_children: {'dmx-pdf-text':-1, 'dmx-pdf-image':-1},\r\n    allowedGlobalChildren: {}\r\n  },\r\n\r\n  render (node) {\r\n    node.style.display = 'none';\r\n    this.$parse();\r\n  },\r\n\r\n  _getAbsoluteUrl (url) {\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    return a.href;\r\n  },\r\n\r\n  _createFooter () {\r\n    const ret = {\r\n      footer: {\r\n        columns: [],\r\n        ...this.props,\r\n      },\r\n      images: {},\r\n    };\r\n\r\n    for (const child of this.children) {\r\n      if (child.data.$type === 'pdf-image') {\r\n        const ref = 'img_ref_' + Math.random().toString(36).slice(2,8);\r\n        const url = this._getAbsoluteUrl(child.props.src);\r\n        const props = {};\r\n        \r\n        if (child.props.fit) {\r\n          props.fit = [child.props.width || 1000, child.props.height || 1000];\r\n        } else {\r\n          if (child.props.width) props.width = child.props.width;\r\n          if (child.props.height) props.height = child.props.height;\r\n        }\r\n\r\n        ret.images[ref] = url;\r\n        ret.footer.columns.push({\r\n          image: ref,\r\n          ...props\r\n        });\r\n\r\n        continue;\r\n      }\r\n\r\n      ret.footer.columns.push({ ...child.props });\r\n    }\r\n\r\n    return {\r\n      footer: (currentPage, pageCount) => {\r\n        const footer = structuredClone(ret.footer);\r\n\r\n        for (const col of footer.columns) {\r\n          if (col.text) col.text = col.text.replace(/##page##/g, currentPage).replace(/##total##/g, pageCount);\r\n        }\r\n        \r\n        //console.info('pdf-footer', footer);\r\n\r\n        return footer;\r\n      },\r\n      images: ret.images,\r\n    };\r\n  },\r\n\r\n});","dmx.Component('pdf-watermark', {\r\n\r\n  attributes: {\r\n    text: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    color: {\r\n      type: String,\r\n      default: 'black',\r\n    },\r\n\r\n    opacity: {\r\n      type: Number,\r\n      default: .25,\r\n    },\r\n\r\n    bold: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    italics: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    fontSize: {\r\n      type: Number,\r\n      default: null,\r\n    },\r\n\r\n    angle: {\r\n      type: Number,\r\n      default: -45,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-watermark',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});","dmx.Component('pdf-text', {\r\n\r\n  attributes: {\r\n    width: { // column width\r\n      type: [String, Number],\r\n      default: null,\r\n    },\r\n\r\n    text: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    fontSize: {\r\n      type: Number,\r\n      default: 12,\r\n    },\r\n\r\n    lineHeight: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n\r\n    bold: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    italics: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    alignment: {\r\n      type: String,\r\n      default: null,\r\n      enum: ['left', 'center', 'right', 'justify'],\r\n    },\r\n\r\n    color: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    background: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-text',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});","dmx.Component('pdf-image', {\r\n\r\n  attributes: {\r\n    width: {\r\n      type: Number,\r\n      default: null,\r\n    },\r\n\r\n    height: {\r\n      type: Number,\r\n      default: null,\r\n    },\r\n\r\n    fit: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    src: {\r\n      type: String,\r\n      default: '',\r\n      ui: {\r\n        type: 'image',\r\n      }\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-image',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});"]}